import{D as Y,F as Z,R as ee,T as te,U as ie,V as re,W as ne,X as ue}from"./chunk-2QUOQDNN.js";import{a as U}from"./chunk-XUBY63RX.js";import{_ as oe,c as Q,d as K,f as H,g as J,h as L,p as X}from"./chunk-BNWYYJHP.js";import{e as V}from"./chunk-R2GFVXRC.js";import{Ab as q,Bb as z,Cb as l,Db as i,Eb as o,Fb as m,I as S,K as T,Nb as A,Pb as g,Q as E,Rb as _,U as D,Ua as a,X as k,Y as I,Yb as G,_b as r,ac as c,fa as v,gb as y,ic as W,k as x,ka as p,kc as $,lc as R,q as P,ra as O,sa as M,u as b,va as B,xb as N,yb as F,zb as j}from"./chunk-CJL4H7H7.js";var h=class{id;idCat;idType;idTypeNew;productionType;name;manufacturer;steelGrade;diameter;gost;profileSize2;pipeWallThickness;status;koef;constructor(e){this.id=e.id,this.idCat=e.idCat,this.idType=e.idType,this.idTypeNew=e.idTypeNew,this.productionType=this.getProductionType(e.productionType),this.name=e.name,this.manufacturer=e.manufacturer,this.steelGrade=e.steelGrade,this.diameter=e.diameter,this.profileSize2=e.profileSize2,this.pipeWallThickness=e.pipeWallThickness,this.status=this.getStatus(e.status),this.koef=e.koef,this.gost=e.gost}getStatus(e){return 0}getProductionType(e){return 0}};var d=class n extends U{constructor(){super("products")}static \u0275fac=function(t){return new(t||n)};static \u0275prov=v({token:n,factory:n.\u0275fac})};var ae=[{id:"p1",idCat:"cat1",idType:"type1",idTypeNew:"typeNew1",productionType:"hot-rolled",name:"\u0422\u0440\u0443\u0431\u0430 \u0441\u0442\u0430\u043B\u044C\u043D\u0430\u044F 108x4",manufacturer:"\u0421\u0435\u0432\u0435\u0440\u0441\u0442\u0430\u043B\u044C",steelGrade:"09\u04132\u0421",diameter:108,gost:"\u0413\u041E\u0421\u0422 8732-78",profileSize2:0,pipeWallThickness:4,status:"active",koef:1.05},{id:"p2",idCat:"cat2",idType:"type2",idTypeNew:"typeNew2",productionType:"cold-drawn",name:"\u0422\u0440\u0443\u0431\u0430 \u0431\u0435\u0441\u0448\u043E\u0432\u043D\u0430\u044F 57x3,5",manufacturer:"\u0427\u0422\u041F\u0417",steelGrade:"20",diameter:57,gost:"\u0413\u041E\u0421\u0422 8734-75",profileSize2:0,pipeWallThickness:3.5,status:"inactive",koef:.98},{id:"p3",idCat:"cat1",idType:"type3",idTypeNew:"typeNew3",productionType:"welded",name:"\u041F\u0440\u043E\u0444\u0438\u043B\u044C\u043D\u0430\u044F \u0442\u0440\u0443\u0431\u0430 60x40x3",manufacturer:"\u0422\u041C\u041A",steelGrade:"\u0421\u04423",diameter:60,gost:"\u0413\u041E\u0421\u0422 30245-2003",profileSize2:40,pipeWallThickness:3,status:"active",koef:1.1},{id:"p4",idCat:"cat3",idType:"type4",idTypeNew:"typeNew4",productionType:"hot-rolled",name:"\u041A\u0440\u0443\u0433 45",manufacturer:"\u041C\u0435\u0447\u0435\u043B",steelGrade:"45",diameter:45,gost:"\u0413\u041E\u0421\u0422 2590-2006",profileSize2:0,pipeWallThickness:0,status:"active",koef:1},{id:"p5",idCat:"cat2",idType:"type1",idTypeNew:"typeNew5",productionType:"cold-drawn",name:"\u0422\u0440\u0443\u0431\u0430 \u043E\u0446\u0438\u043D\u043A\u043E\u0432\u0430\u043D\u043D\u0430\u044F 25x2",manufacturer:"\u041E\u041C\u041A",steelGrade:"08\u042518\u041D10",diameter:25,gost:"\u0413\u041E\u0421\u0422 3262-75",profileSize2:0,pipeWallThickness:2,status:"archived",koef:.9}];var f=class n{api=p(d);filters$=new x({});products$=this.filters$.pipe(I(e=>P(ae).pipe(b(t=>t.map(u=>new h(u))))),D(1));reload(e){this.filters$.next(e||{})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=v({token:n,factory:n.\u0275fac})};function se(n,e){if(n&1&&m(0,"app-quantity",16),n&2){let t=_();l("formControl",t.quantityControl)}}var C=class n{destroyRef=p(B);cartService=p(ne);context=Z();quantityControl=new K(0,{nonNullable:!0});get product(){return this.context.data}get quantity(){return this.cartService.getQuantity(this.product.id)}ngOnInit(){this.quantityControl.patchValue(this.quantity,{emitEvent:!1}),this.quantityControl.valueChanges.pipe(k(this.quantity),E(),T((e,t)=>e[1]===t[1]),X(this.destroyRef)).subscribe(([e,t])=>{if(t>e)this.cartService.addProduct(this.product,t-e);else if(t<e){let u=e-t;for(let s=0;s<u;s++)this.cartService.decreaseQuantity(this.product.id)}t===0&&this.cartService.removeProduct(this.product.id)})}pushToCart(){this.cartService.addProduct(this.product,1),this.quantityControl.patchValue(this.quantity,{emitEvent:!1})}openCart(){this.cartService.open()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=y({type:n,selectors:[["ng-component"]],decls:56,vars:9,consts:[[1,"product-overview"],[1,"product-overview__block"],["src","product.jpg",1,"product-overview__image",3,"alt"],[1,"product-overview__title"],[1,"product-overview__list"],[1,"product-overview__list-line"],[1,"product-overview__group"],[1,"product-overview__group-title"],[1,"product-overview__group-value"],[1,"product-overview__block-title"],[1,"product-overview__desc"],[1,"product-overview__desc-item"],[1,"product-overview__desc-title"],[1,"product-overview__desc-value"],[1,"product-overview__footer"],[3,"click"],[2,"width","30%",3,"formControl"]],template:function(t,u){t&1&&(i(0,"div",0)(1,"div",1),m(2,"img",2),i(3,"h3",3),r(4),o(),i(5,"div",4)(6,"div",5)(7,"div",6)(8,"span",7),r(9," \u041D\u0422\u0414 "),o(),i(10,"span",8),r(11),o()(),i(12,"div",6)(13,"span",7),r(14," \u0420\u0430\u0437\u043C\u0435\u0440 "),o(),i(15,"span",8),r(16),o()()(),i(17,"div",5)(18,"div",6)(19,"span",7),r(20," \u041C\u0430\u0440\u043A\u0430 \u0441\u0442\u0430\u043B\u0438 "),o(),i(21,"span",8),r(22),o()(),i(23,"div",6)(24,"span",7),r(25," \u0422\u043E\u043B\u0449\u0438\u043D\u0430 "),o(),i(26,"span",8),r(27),o()()()()(),i(28,"div",1)(29,"span",9),r(30," \u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 "),o(),i(31,"div",10)(32,"div",11)(33,"span",12),r(34," \u041D\u0430\u043B\u0438\u0447\u0438\u0435 \u043D\u0430 \u0441\u043A\u043B\u0430\u0434\u0435 "),o(),i(35,"span",13),r(36," \u041C\u0435\u0440\u043D\u043E\u0441\u0442\u044C \u0434\u043B\u0438\u043D\u044B "),o()(),i(37,"div",11)(38,"span",12),r(39," \u041C\u0435\u0440\u043D\u043E\u0441\u0442\u044C \u0434\u043B\u0438\u043D\u044B "),o(),i(40,"span",13),r(41," \u041C\u0435\u0440\u043D\u043E\u0441\u0442\u044C \u0434\u043B\u0438\u043D\u044B "),o()(),i(42,"div",11)(43,"span",12),r(44," \u0422\u0438\u043F \u043A\u043E\u043D\u0446\u043E\u0432 "),o(),i(45,"span",13),r(46," \u041C\u0435\u0440\u043D\u043E\u0441\u0442\u044C \u0434\u043B\u0438\u043D\u044B "),o()(),i(47,"div",11)(48,"span",12),r(49," \u041F\u0440\u0438\u0437\u043D\u0430\u043A \u0442\u0435\u0440\u043C\u043E\u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0438 "),o(),i(50,"span",13),r(51," \u041C\u0435\u0440\u043D\u043E\u0441\u0442\u044C \u0434\u043B\u0438\u043D\u044B "),o()()()(),i(52,"div",14)(53,"app-button",15),g("click",function(){return u.quantity>0?u.openCart():u.pushToCart()}),r(54," \u0412 \u043A\u043E\u0440\u0437\u0438\u043D\u0443 "),o(),N(55,se,1,1,"app-quantity",16),o()()),t&2&&(a(2),l("alt",u.product.name),a(2),c(" ",u.product.name," "),a(7),c(" ",u.product.gost," "),a(5),c(" ",u.product.profileSize2," "),a(6),c(" ",u.product.steelGrade," "),a(5),c(" ",u.product.diameter," "),a(26),G("width",u.quantity>0?70:100,"%"),a(2),F(u.quantity>0?55:-1))},dependencies:[oe,re,L,Q,H],styles:[".product-overview[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.product-overview__block[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:15px;background-color:#2a2a2a;padding:12px;border-radius:12px}.product-overview__block-title[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.product-overview__desc[_ngcontent-%COMP%]{max-width:335px;width:100%;display:flex;flex-wrap:wrap;font-weight:300}.product-overview__desc-item[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between}.product-overview__desc-title[_ngcontent-%COMP%]{color:#b0b0b0}.product-overview__image[_ngcontent-%COMP%]{width:100%;border-radius:12px}.product-overview__title[_ngcontent-%COMP%]{font-size:20px;font-weight:500;color:#fff}.product-overview__list[_ngcontent-%COMP%]{max-width:335px;width:100%;align-items:center;justify-content:center;color:#fff;display:flex;flex-direction:column;gap:20px;font-size:16px;font-weight:300}.product-overview__list-line[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between}.product-overview__group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.product-overview__group-title[_ngcontent-%COMP%]{color:#b0b0b0}.product-overview__footer[_ngcontent-%COMP%]{display:flex;gap:10px}"],changeDetection:0})};function le(n,e){if(n&1){let t=A();i(0,"app-product-card",6),g("click",function(){let s=O(t).$implicit,ce=_();return M(ce.openProduct(s))}),o()}if(n&2){let t=e.$implicit;l("product",t)}}var pe=class n{productsStore=p(f);tg=p(ue);dialog=ee(C,{dismissible:!0,label:"\u041E \u0442\u043E\u0432\u0430\u0440\u0435"});products$=this.productsStore.products$;openProduct(e){this.dialog(e).pipe(S(1)).subscribe(),this.tg.MainButton.show()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=y({type:n,selectors:[["ng-component"]],features:[W([f,d])],decls:9,vars:2,consts:[[1,"products-page"],[1,"products-page__search"],["placeholder","\u041F\u043E\u0438\u0441\u043A","iconStart","@tui.search",1,"products-page__search-input"],["appearance","secondary-destructive","iconStart","@tui.settings-2","size","l","tuiIconButton","","type","button",1,"products-page__search-action"],[1,"products-page__list"],[3,"product"],[3,"click","product"]],template:function(t,u){t&1&&(i(0,"div",0)(1,"div",1),m(2,"app-input",2),i(3,"button",3),r(4," Settings "),o()(),i(5,"div",4),q(6,le,1,1,"app-product-card",5,j),$(8,"async"),o()()),t&2&&(a(6),z(R(8,0,u.products$)))},dependencies:[te,J,ie,Y,V],styles:[".products-page__list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(163px,1fr));gap:10px}.products-page__search[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:space-between;margin-bottom:24px}.products-page__search-input[_ngcontent-%COMP%]{width:100%}.products-page__search-action[_ngcontent-%COMP%]{color:#fff;border-radius:100%;border:1px solid #4C4E51}"],changeDetection:0})};export{pe as ProductsPageComponent};
